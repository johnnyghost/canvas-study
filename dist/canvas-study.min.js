/*! canvas-study 31-01-2015 */
!function(a,b){"use strict";function c(b,c,d){a.extend(f,d);var e=Math.random()*(f.angle.max-f.angle.min)+f.angle.min,g=Math.random()*(f.speed.max-f.speed.min)+f.speed.min,h=e*(Math.PI/180);this.x=b,this.y=c,this.vx=Math.cos(h)*g,this.vy=Math.sin(h)*g,setInterval(this.move.bind(this),1e3/f.fps)}function d(){h.canvas.height=b.innerHeight,h.canvas.width=b.innerWidth,a(b).one("click",function(a){this.projectil=new c(a.clientX,a.clientY)}),a(b).on("resize",function(){h.canvas.height=b.innerHeight,h.canvas.width=b.innerWidth,this.projectil&&this.projectil.move()})}function e(){d()}var f={speed:{min:5,max:30},elasticity:.5,angle:{min:180,max:360},friction:.008,gravity:.5,radius:30,projectilColor:"#068A87",fps:60},g=document.getElementById("stage"),h=g.getContext("2d");c.prototype={draw:function(){g.getContext&&(h=g.getContext("2d"),h.beginPath(),h.arc(this.x,this.y,f.radius,0,2*Math.PI,!1),h.fillStyle=f.projectilColor,h.fill(),h.closePath())},clear:function(){h.clearRect(0,0,g.width,g.height)},move:function(){this.clear(),this.vx=this.vx-this.vx*f.friction,this.vy+=f.gravity,this.y+f.radius>g.height&&(this.y=g.height-f.radius,this.vy=-this.vy*f.elasticity),this.x+f.radius>=g.width&&(this.x=g.width-f.radius,this.vx*=-1),this.x+f.radius<0&&(this.vx*=-1),this.y+=this.vy,this.x+=this.vx,this.draw()}},e()}(jQuery,window);